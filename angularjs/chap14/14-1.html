<!DOCTYPE html>
<html lang="en" ng-app="myApp">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="./../lib/angular.js"></script>
    <script src="./../lib/angular-route.js"></script>
    <title> 14-1服务 </title>
</head>

<body>
    <div ng-controller="MyController">
        <button ng-click="sayHello()">Hello</button>
    </div>

</body>
<script>
    angular.module('myApp', [])
    .factory('UserService', function ($http) {
        var current_user;
        return {
            getCurrentUser: function () {
                return current_user;
            },
            setCurrentUser: function (user) {
                current_user = user;
            }
        };
    })
    .controller('MyController',function($scope,UserService){
           $scope.sayHello=function(){
            if (!UserService.getCurrentUser()) {
                UserService.setCurrentUser('tom')
                console.log('set user tom');
            } else {
                alert('hello:' + UserService.getCurrentUser())
            }

           }
    })
</script>

</html>